<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>remix: Square demo</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Square demo</h1><div class="fragment"><pre><span class="comment">/*</span>
<span class="comment"> * squaredemo.c</span>
<span class="comment"> *</span>
<span class="comment"> * Copyright (C) 2001 Commonwealth Scientific and Industrial Research</span>
<span class="comment"> * Organisation (CSIRO), Australia.</span>
<span class="comment"> *</span>
<span class="comment"> * Permission to use, copy, modify, distribute, and sell this software and</span>
<span class="comment"> * its documentation for any purpose is hereby granted without fee, provided</span>
<span class="comment"> * that the above copyright notice appear in all copies and that both that</span>
<span class="comment"> * copyright notice and this permission notice appear in supporting</span>
<span class="comment"> * documentation.  No representations are made about the suitability of this</span>
<span class="comment"> * software for any purpose.  It is provided "as is" without express or</span>
<span class="comment"> * implied warranty.</span>
<span class="comment"> *</span>
<span class="comment"> */</span>

<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;stdlib.h&gt;</span>

<span class="preprocessor">#include &lt;<a class="code" href="remix_8h.html">remix/remix.h</a>&gt;</span>

<span class="preprocessor">#define remix_add_sound_B(a,s,l,t1,t2) \</span>
<span class="preprocessor">  remix_sound_new ((a), (s), (l), REMIX_BEAT24S(t1), REMIX_BEAT24S(t2))</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define BEAT 24</span>
<span class="preprocessor"></span><span class="preprocessor">#define HALF_BEAT 12</span>
<span class="preprocessor"></span><span class="preprocessor">#define QUARTER_BEAT 6</span>
<span class="preprocessor"></span><span class="preprocessor">#define EIGHTH_BEAT 3</span>
<span class="preprocessor"></span>
<span class="keywordtype">int</span>
main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv)
{
  <a class="code" href="remix__types_8h.html#a33">RemixEnv</a> * env;
  <a class="code" href="remix__types_8h.html#a39">RemixDeck</a> * deck, * deck2;
  <a class="code" href="remix__types_8h.html#a40">RemixTrack</a> * track, * track2, * track3, * track4;
  <a class="code" href="remix__types_8h.html#a41">RemixLayer</a> * l1, * l2, * l3, * l4, * l5;
  <a class="code" href="remix__types_8h.html#a42">RemixSound</a> * s;
  <a class="code" href="remix__types_8h.html#a46">RemixSquareTone</a> * square1, * square2, * square3, * square4, * square5;
  <a class="code" href="remix__types_8h.html#a45">RemixPlugin</a> * noise_plugin;
  <a class="code" href="remix__types_8h.html#a27">RemixBase</a> * noise;
  <a class="code" href="remix__types_8h.html#a35">RemixEnvelope</a> * env1, * env2, * env3;
  <a class="code" href="remix__types_8h.html#a35">RemixEnvelope</a> * be1, * be2, * be3;
  <a class="code" href="remix__types_8h.html#a25">RemixCount</a> length;
  <a class="code" href="remix__types_8h.html#a47">RemixMonitor</a> * monitor;
  <span class="keywordtype">int</span> b = 0, b2 = 0, mb;

  env = <a class="code" href="remix_8h.html#a2">remix_init</a> ();

  <a class="code" href="remix_8h.html#a9">remix_set_tempo</a> (env, 160);
  <a class="code" href="remix_8h.html#a11">remix_set_channels</a> (env, REMIX_STEREO);

  square1 = <a class="code" href="remix_8h.html#a38">remix_squaretone_new</a> (env, 220.0);
  square2 = <a class="code" href="remix_8h.html#a38">remix_squaretone_new</a> (env, 440.0);
  square3 = <a class="code" href="remix_8h.html#a38">remix_squaretone_new</a> (env, 385.0);
  square4 = <a class="code" href="remix_8h.html#a38">remix_squaretone_new</a> (env, 231.0);
  square5 = <a class="code" href="remix_8h.html#a38">remix_squaretone_new</a> (env, 165.0);

  noise_plugin = <a class="code" href="remix_8h.html#a13">remix_find_plugin</a> (env, <span class="stringliteral">"builtin::noise"</span>);
  noise = <a class="code" href="remix_8h.html#a14">remix_new</a> (env, noise_plugin, NULL);

  monitor = <a class="code" href="remix_8h.html#a41">remix_monitor_new</a> (env);

  deck = <a class="code" href="remix__deck_8h.html#a0">remix_deck_new</a> (env);

<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  track = <a class="code" href="remix__deck_8h.html#a4">remix_track_new</a> (env, deck);

  l1 = <a class="code" href="remix__deck_8h.html#a11">remix_layer_new_ontop</a> (env, track, REMIX_TIME_BEAT24S);
  remix_add_sound_B (env, square1, l1, b, BEAT); b += BEAT;
<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  remix_add_sound_B (env, square2, l1, b, QUARTER_BEAT); b += HALF_BEAT;
  remix_add_sound_B (env, square2, l1, b, HALF_BEAT); b += HALF_BEAT;
  remix_add_sound_B (env, square1, l1, b, HALF_BEAT); b += HALF_BEAT;
  remix_add_sound_B (env, square2, l1, b, QUARTER_BEAT); b += HALF_BEAT;
  remix_add_sound_B (env, square3, l1, b, HALF_BEAT); b += HALF_BEAT;
  remix_add_sound_B (env, square2, l1, b, HALF_BEAT); b += HALF_BEAT;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span><span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  track2 = <a class="code" href="remix__deck_8h.html#a4">remix_track_new</a> (env, deck);
  <a class="code" href="remix__deck_8h.html#a5">remix_track_set_gain</a> (env, track2, 0.6);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  track2 = track;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  l2 = <a class="code" href="remix__deck_8h.html#a11">remix_layer_new_ontop</a> (env, track2, REMIX_TIME_BEAT24S);
  s = remix_add_sound_B (env, square4, l2, b2, HALF_BEAT); b2 += BEAT;

  be1 = <a class="code" href="remix__envelope_8h.html#a0">remix_envelope_new</a> (env, REMIX_ENVELOPE_LINEAR);
  <a class="code" href="remix__envelope_8h.html#a3">remix_envelope_set_timetype</a> (env, be1, REMIX_TIME_BEAT24S);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, be1, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(0), 0.9);
  <a class="code" href="remix__deck_8h.html#a43">remix_sound_set_blend_envelope</a> (env, s, be1);

<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  s = remix_add_sound_B (env, square5, l2, b2, HALF_BEAT); b2 += BEAT;
  be2 = <a class="code" href="remix__envelope_8h.html#a0">remix_envelope_new</a> (env, REMIX_ENVELOPE_LINEAR);
  <a class="code" href="remix__envelope_8h.html#a3">remix_envelope_set_timetype</a> (env, be2, REMIX_TIME_BEAT24S);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, be2, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(0), 0.6);
  <a class="code" href="remix__deck_8h.html#a43">remix_sound_set_blend_envelope</a> (env, s, be2);

  s = remix_add_sound_B (env, square4, l2, b2, BEAT); b2 += 48;
  be3 = <a class="code" href="remix__envelope_8h.html#a0">remix_envelope_new</a> (env, REMIX_ENVELOPE_LINEAR);
  <a class="code" href="remix__envelope_8h.html#a3">remix_envelope_set_timetype</a> (env, be3, REMIX_TIME_BEAT24S);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, be3, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(0), 0.8);
  <a class="code" href="remix__deck_8h.html#a43">remix_sound_set_blend_envelope</a> (env, s, be3);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  track4 = <a class="code" href="remix__deck_8h.html#a4">remix_track_new</a> (env, deck);
  <a class="code" href="remix__deck_8h.html#a5">remix_track_set_gain</a> (env, track4, 0.1);
  l5 = <a class="code" href="remix__deck_8h.html#a11">remix_layer_new_ontop</a> (env, track4, REMIX_TIME_BEAT24S);
  remix_add_sound_B (env, noise, l5, 0, b);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  mb = MAX (b, b2);

  length = <a class="code" href="remix_8h.html#a26">remix_length</a> (env, deck);
  printf (<span class="stringliteral">"deck has length %ld\n"</span>, length);

  deck2 = <a class="code" href="remix__deck_8h.html#a0">remix_deck_new</a> (env);
  track3 = <a class="code" href="remix__deck_8h.html#a4">remix_track_new</a> (env, deck2);
  l3 = <a class="code" href="remix__deck_8h.html#a11">remix_layer_new_ontop</a> (env, track3, REMIX_TIME_BEAT24S);

  s = remix_add_sound_B (env, deck, l3, 0, mb);

<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  env1 = <a class="code" href="remix__envelope_8h.html#a0">remix_envelope_new</a> (env, REMIX_ENVELOPE_LINEAR);
  <a class="code" href="remix__envelope_8h.html#a3">remix_envelope_set_timetype</a> (env, env1, REMIX_TIME_BEAT24S);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, env1, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(0), 0.0);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, env1, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(mb), 0.9);
  <a class="code" href="remix__deck_8h.html#a41">remix_sound_set_gain_envelope</a> (env, s, env1);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  s = remix_add_sound_B (env, deck, l3, mb, mb);

<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  env2 = <a class="code" href="remix__envelope_8h.html#a0">remix_envelope_new</a> (env, REMIX_ENVELOPE_LINEAR);
  <a class="code" href="remix__envelope_8h.html#a3">remix_envelope_set_timetype</a> (env, env2, REMIX_TIME_BEAT24S);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, env2, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(0), 0.9);
  <a class="code" href="remix__deck_8h.html#a41">remix_sound_set_gain_envelope</a> (env, s, env2);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  s = remix_add_sound_B (env, deck, l3, 2*mb, mb);

<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>  env3 = <a class="code" href="remix__envelope_8h.html#a0">remix_envelope_new</a> (env, REMIX_ENVELOPE_LINEAR);
  <a class="code" href="remix__envelope_8h.html#a3">remix_envelope_set_timetype</a> (env, env3, REMIX_TIME_BEAT24S);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, env3, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(0), 0.9);
  <a class="code" href="remix__envelope_8h.html#a8">remix_envelope_add_point</a> (env, env3, <a class="code" href="remix__types_8h.html#a22">REMIX_BEAT24S</a>(mb), 0.0);
  <a class="code" href="remix__deck_8h.html#a41">remix_sound_set_gain_envelope</a> (env, s, env3);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  length = <a class="code" href="remix_8h.html#a26">remix_length</a> (env, deck2);

  l4 = <a class="code" href="remix__deck_8h.html#a11">remix_layer_new_ontop</a> (env, track3, REMIX_TIME_SAMPLES);
  <a class="code" href="remix__deck_8h.html#a26">remix_sound_new</a> (env, monitor, l4, <a class="code" href="remix__types_8h.html#a20">REMIX_SAMPLES</a>(0), <a class="code" href="remix__types_8h.html#a20">REMIX_SAMPLES</a>(length));

  printf (<span class="stringliteral">"deck: %p\ttrack: %p\tl1: %p\ttrack2: %p\tl2: %p\n"</span>,
          deck, track, l1, track2, l2);
  printf (<span class="stringliteral">"deck2: %p\ttrack3: %p\tl3: %p\tl4: %p\n"</span>, deck2, track3, l3, l4);
  printf (<span class="stringliteral">"square1: %p\tsquare2: %p\tsquare3: %p\nsquare4: %p\tsquare5: %p\n"</span>,
          square1, square2, square3, square4, square5);
  printf (<span class="stringliteral">"monitor: %p\n"</span>, monitor);

  <a class="code" href="remix_8h.html#a25">remix_process</a> (env, deck2, length, RemixNone, RemixNone);

  <a class="code" href="remix_8h.html#a4">remix_purge</a> (env);

  exit (0);
}
</pre></div> squaredemo.c 
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Tue Jan 13 12:05:54 2004 for remix by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
